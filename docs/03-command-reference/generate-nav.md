# folio generate-nav

Generates comprehensive navigation files optimized for LLM accessibility and quick document discovery.

## Usage

```bash
folio generate-nav [options]
```

## Options

| Option | Description |
|--------|-------------|
| `--format <format>` | Output format: `markdown` or `json` (default: `markdown`) |
| `--include-content` | Include document summaries in navigation |
| `--exclude <types>` | Comma-separated list of document types to exclude |

## What Gets Generated

### Root README.md

Creates a comprehensive index at `docs/README.md` with:

- **Quick Navigation**: Direct links to document types and directories
- **Document Index**: Tables with all documents, IDs, and statuses
- **Search Patterns**: Example queries for finding specific documents
- **Status Overview**: Summary of document statuses across types

Example output:
```markdown
# Project Documentation

*This index is automatically generated by folio-cli for LLM accessibility.*

## ðŸš€ Quick Navigation

### By Document Type
- **ADR** (5 documents) â†’ [Browse adrs](#architecture-decision-records)
- **TICKET** (12 documents) â†’ [Browse tickets](#tickets)
- **EPIC** (3 documents) â†’ [Browse epics](#epics)

### By Directory Structure
- [ðŸ“ 02-architecture-and-design](./02-architecture-and-design/) (5 documents)
- [ðŸ“ 06-sprint-tickets](./06-sprint-tickets/) (12 documents)

## ðŸ” Document Index

### ARCHITECTURE DECISION RECORDS

| ID | Title | Status | File |
|----|-------|--------|------|
| `0001` | [Use TypeScript for new services](02-architecture-and-design/adrs/0001-use-typescript.md) | accepted | `0001-use-typescript.md` |
| `0002` | [Adopt microservices architecture](02-architecture-and-design/adrs/0002-microservices.md) | proposed | `0002-microservices.md` |
```

### Directory-Level README Files

Creates index files in each directory with:

- **Local navigation**: Documents in that specific directory
- **Back navigation**: Links to parent directories
- **Optimized tables**: ID-based tables for documents with IDs

### JSON Navigation (Optional)

When using `--format=json`, generates machine-readable navigation:

```json
{
  "generated": "2024-07-08T10:30:00Z",
  "structure": {
    "types": {
      "adr": {
        "path": "02-architecture-and-design/adrs",
        "count": 5,
        "documents": [
          {
            "id": "0001",
            "title": "Use TypeScript for new services",
            "status": "accepted",
            "file": "0001-use-typescript.md",
            "path": "02-architecture-and-design/adrs/0001-use-typescript.md"
          }
        ]
      }
    }
  }
}
```

## LLM Optimization Features

### Quick ID Lookup

The generated navigation includes patterns that help LLMs quickly find documents:

```markdown
## ðŸ”Ž Quick Search

### Find by ID
Use these patterns to quickly find documents:

- **ADR IDs**: `0001`, `0002`, `0003`, ...
- **TICKET IDs**: `JIRA-123`, `JIRA-456`, `GITHUB-789`, ...

### Find by Status
Available statuses: `proposed`, `accepted`, `rejected`, `deprecated`
```

### Hyperlinked Tables

All document references are hyperlinked for instant navigation:

```markdown
| ID | Title | Status | File |
|----|-------|--------|------|
| `CE-112.3` | [Build authentication service](./CE-112.3-auth-service.md) | In Progress | `CE-112.3-auth-service.md` |
```

### Hierarchical Structure

Directory structure is clearly outlined:

```markdown
### By Directory Structure
- [ðŸ“ 00-vision-and-strategy](./00-vision-and-strategy/) (3 documents)
- [ðŸ“ 01-product-and-planning](./01-product-and-planning/) (8 documents)
  - [ðŸ“ epics](./01-product-and-planning/epics/) (3 documents)
- [ðŸ“ 02-architecture-and-design](./02-architecture-and-design/) (12 documents)
  - [ðŸ“ adrs](./02-architecture-and-design/adrs/) (5 documents)
```

## Examples

### Generate basic navigation:

```bash
folio generate-nav
```

### Generate with content summaries:

```bash
folio generate-nav --include-content
```

### Exclude certain document types:

```bash
folio generate-nav --exclude="draft,template"
```

### Generate JSON format:

```bash
folio generate-nav --format=json > docs-structure.json
```

## When Navigation Gets Updated

Navigation is automatically regenerated when:

- Running `folio init` (creates initial navigation)
- Running `folio new` (adds new documents)
- Running `folio status` (updates status information)
- Manually running `folio generate-nav`

## Integration with Other Commands

### Automatic Updates

Many commands automatically trigger navigation regeneration:

```bash
# These all update navigation automatically
folio new adr "New decision"
folio status adr 1 "accepted"
folio adr deprecate 2
```

### Manual Regeneration

Regenerate when you've made manual changes:

```bash
# After editing files manually
folio generate-nav

# After restructuring directories
folio generate-nav --include-content
```

## LLM Usage Patterns

The generated navigation enables LLMs to:

### Quick Document Discovery
```
Human: "Find ticket CE-112.3"
LLM: Looking at the root README.md, I can see ticket CE-112.3 is linked in the tickets table.
```

### Status Queries
```
Human: "What ADRs are proposed?"
LLM: According to the navigation, there are 2 proposed ADRs: 0002 (microservices) and 0004 (database choice).
```

### Structural Understanding
```
Human: "What's in the engineering directory?"
LLM: The 03-engineering directory contains 4 documents including coding standards and development processes.
```

## Configuration

### Customize Generation

Add navigation settings to your `folio.config.ts`:

```typescript
export default defineConfig({
  // ... other config
  navigation: {
    includeContent: false,
    excludeTypes: ['draft', 'template'],
    customSections: [
      {
        title: 'Quick Actions',
        content: `
- [Create New ADR](./templates/adr.md)
- [View All Tickets](./06-sprint-tickets/)
- [Check Validation Status](#validation)
        `
      }
    ]
  }
});
```

## Performance

Navigation generation is optimized for:
- **Fast scanning**: Efficient frontmatter parsing
- **Incremental updates**: Only regenerates changed sections
- **Large document sets**: Handles thousands of documents efficiently

## See Also

- [folio find](./find.md) - Search documents using the generated navigation
- [LLM Navigation Guide](../04-advanced-guides/llm-navigation.md) - Best practices for LLM accessibility
- [folio init](./init.md) - Initial navigation setup